<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewTon DC - Tournament Manager</title>
    <link rel="icon" type="image/jpeg" href="logo.jpg">
    <link rel="stylesheet" href="styles.css">

    <script>
        // Initialize help system when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            // Load help system after other initialization
            setTimeout(() => {
                if (typeof initializeHelpSystem === 'function') {
                    initializeHelpSystem();
                }
            }, 500);
        });
    </script>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="header-top">
                <h1>
                    <div id="clubLogo" class="logo-placeholder">
                        CLUB<br>LOGO
                    </div>
                    NewTon DC - Tournament Manager
                </h1>
            </div>
            <div class="nav">
                <button class="nav-btn active" data-page="setup">Setup</button>
                <button class="nav-btn" data-page="registration">Registration</button>
                <button class="nav-btn" data-page="tournament">Tournament</button>
                <button class="nav-btn" data-page="config">Config</button>
                <!-- NEW: Tournament status moved to bottom right of header -->
                <div id="headerTournamentStatus" class="header-tournament-status">
                    Tournament: <strong>None</strong>
                </div>
            </div>
        </div>

        <!-- Setup Page -->
        <div id="setup" class="page active setup-page-flex">
            <div class="setup-page-header">
                <h2>Tournament Setup</h2>
                <div class="tournament-creation-row">
                    <div class="form-group tournament-name-field">
                        <label for="tournamentName">Tournament Name</label>
                        <input type="text" id="tournamentName" placeholder="Enter tournament name">
                    </div>
                    <div class="form-group tournament-date-field">
                        <label for="tournamentDate">Tournament Date</label>
                        <input type="date" id="tournamentDate">
                    </div>
                    <button class="btn btn-success tournament-create-button" onclick="createTournament()">Create New
                        Tournament</button>
                </div>

                <div class="form-group">
                    <button class="btn btn-success" onclick="exportTournament()">Export Tournament</button>
                    <button class="btn btn-warning" onclick="document.getElementById('importFile').click()">Import
                        Tournament</button>
                    <button class="btn btn-danger" onclick="showResetTournamentModal()">Reset Tournament</button>
                    <button id="uploadToServerBtn" class="btn btn-success"
                        onclick="document.getElementById('uploadFile').click()" style="display: none;">Upload to
                        Server</button>
                    <input type="file" id="importFile" accept=".json" style="display: none;"
                        onchange="importTournament(event)">
                    <input type="file" id="uploadFile" accept=".json" style="display: none;"
                        onchange="uploadTournamentFile(event)">
                </div>

                <div id="importStatus" class="alert" style="display: none; margin-top: 10px;">
                    <!-- Import status messages will appear here -->
                </div>
            </div>

            <div class="two-column-container setup-page-main">
                <div class="scrollable-column">
                    <h3>Recent Tournaments
                        <button class="btn" id="toggleTournamentsBtn" onclick="toggleTournamentView()">Show All</button>
                    </h3>
                    <div class="scrollable-column-content">
                        <div id="recentTournaments">
                            <p>No tournaments found</p>
                        </div>
                    </div>
                </div>

                <div class="scrollable-column">
                    <h3>Match Results</h3>
                    <div class="scrollable-column-content">
                        <div id="matchResults">
                            <p style="color: #6b7280; font-style: italic;">No match results yet</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Registration Page -->
        <div id="registration" class="page registration-page-flex">
            <div class="registration-page-header">
                <h2>Player Registration</h2>

                <div class="player-registration-row">
                    <div class="form-group player-name-field">
                        <label for="playerName">Add New Player</label>
                        <input type="text" id="playerName" placeholder="Enter player name">
                    </div>
                    <button class="btn btn-success" onclick="addPlayer()">Add Player</button>
                </div>

                <div class="controls-row">
                    <div class="control-buttons">
                        <button class="btn btn-success" onclick="exportResultsJSON()">Export JSON</button>
                        <button class="btn btn-success" onclick="exportResultsCSV()">Export CSV</button>
                        <button class="btn" onclick="showPage('tournament')">Go to Tournament</button>
                    </div>
                    <div class="player-count"><span id="playerCount">0</span> Registered Players (<span
                            id="paidCount">0</span> paid)</div>
                </div>
            </div>

            <div class="two-column-container registration-page-main">
                <!-- Left Column: Tournament Players -->
                <div class="scrollable-column">
                    <h3>Tournament Players <span style="font-weight: normal; font-size: 14px; color: #6b7280;">(Click to
                            toggle paid status)</span></h3>
                    <div class="scrollable-column-content">
                        <div id="playersContainer" class="players-list">
                            <!-- Players will be added here -->
                        </div>
                    </div>
                </div>

                <!-- Right Column: Contextual Content -->
                <div class="scrollable-column">
                    <!-- Player List Section (shown during setup) -->
                    <div id="playerListSection">
                        <div class="player-list-header">
                            <span id="playerListCount">Saved Players</span>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <span style="font-size: 13px; color: #6b7280; font-weight: normal;">Import from
                                    tournament export file</span>
                                <button class="btn btn-success" onclick="importPlayerListFromFile()">Import Saved
                                    Players</button>
                            </div>
                        </div>
                        <div class="scrollable-column-content">
                            <div id="playerListContainer">
                                <!-- Player List will be rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- Tournament Results Section (shown during tournament) -->
                    <div id="tournamentResultsSection" style="display: none;">
                        <h3>Tournament Results</h3>
                        <div class="scrollable-column-content">
                            <div class="results-table-container">
                                <table class="results-table" id="resultsSection">
                                    <thead>
                                        <tr>
                                            <th>Rank</th>
                                            <th>Player</th>
                                            <th>Points</th>
                                            <th>Short Legs</th>
                                            <th>High Outs</th>
                                            <th>180s</th>
                                            <th>Tons</th>
                                            <th>Legs Won</th>
                                            <th>Legs Lost</th>
                                            <th style="width: 0; padding: 0; border: none;"></th>
                                        </tr>
                                    </thead>
                                    <tbody id="resultsTableBody">
                                    </tbody>
                                </table>
                                <div id="resultsEmptyMessage"
                                    style="display: none; text-align: center; color: #666; font-style: italic; padding: 20px;">
                                    No players added yet
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tournament Page -->
        <div id="tournament" class="page">
            <div class="bracket-container">
                <div class="bracket-controls">
                    <!-- Top row -->
                    <div class="bracket-controls-top">
                        <div class="bracket-controls-top-left">
                            <button class="zoom-btn" onclick="showStatisticsModal()"
                                title="View tournament statistics and rankings">≡ Stats/Results</button>
                            <button class="zoom-btn match-controls-btn" onclick="showMatchCommandCenter()"
                                title="Show LIVE and UPCOMING matches">➹ Match Controls</button>
                        </div>
                        <div class="bracket-controls-top-right">
                            <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">−</button>
                        </div>
                    </div>

                    <!-- Middle row -->
                    <div class="bracket-controls-middle">
                        <div class="bracket-controls-middle-left">
                            <button class="zoom-btn" onclick="showPage('registration')"
                                title="Exit Tournament to edit statistics and see current results">⬅
                                Players/Points</button>
                        </div>
                        <div class="bracket-controls-middle-right">
                            <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">⌂</button>
                        </div>
                    </div>

                    <!-- Bottom row -->
                    <div class="bracket-controls-bottom">
                        <div class="bracket-controls-bottom-left">
                            <!-- Empty - Players/Points moved to middle row -->
                        </div>
                        <div class="bracket-controls-bottom-right">
                            <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">+</button>
                        </div>
                    </div>
                </div>
                <div class="bracket-watermarks">
                    <div class="watermark-left" id="watermark-left">
                    </div>
                    <div class="watermark-center" id="watermark-center">
                    </div>
                    <div class="watermark-right" id="watermark-right">
                        No Tournament
                    </div>
                </div>

                <div class="bracket-viewport" id="bracketViewport">
                    <div class="bracket-canvas" id="bracketCanvas">
                        <!--<div class="bracket-title back">BACKSIDE</div>
                        <div class="bracket-title front">FRONTSIDE</div> -->

                        <div id="bracketMatches">
                            <!-- Bracket matches will be rendered here -->
                        </div>

                        <div id="bracketLines">
                            <!-- Connection lines will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Configuration Page -->
        <div id="config" class="page config-page">
            <div class="config-page-header">
                <h2>Tournament Configuration</h2>
            </div>

            <div class="config-sections-container">
                <!-- Left Column -->
                <div class="config-column">
                    <!-- Logo Section -->
                    <div class="config-section">
                        <h3>Logo</h3>
                        <div class="config-content">
                            <div class="info-text">
                                To change the logo, place a square image with the name 'logo.png', 'logo.jpg',
                                'logo.jpeg', or 'logo.svg' in the folder that contains the file tournament.html. Browser
                                favicon uses the file 'logo.jpg'.
                            </div>
                        </div>
                    </div>

                    <!-- Branding Section -->
                    <div class="config-section">
                        <h3>Branding</h3>
                        <div class="config-content">
                            <div class="form-group">
                                <label for="applicationTitle">Club Name</label>
                                <input type="text" id="applicationTitle" value="NewTon DC" placeholder="Your Club Name">
                            </div>
                            <button class="btn btn-success" onclick="saveApplicationSettings()">Save Branding</button>
                        </div>
                    </div>

                    <!-- Lane Management Section -->
                    <div class="config-section">
                        <h3>Lane Management</h3>
                        <div class="config-content">
                            <div class="config-grid">
                                <div class="form-group">
                                    <label for="maxLanes">Maximum Number of Lanes</label>
                                    <select id="maxLanes">
                                        <option value="1">1 Lane</option>
                                        <option value="2">2 Lanes</option>
                                        <option value="3">3 Lanes</option>
                                        <option value="4">4 Lanes</option>
                                        <option value="5">5 Lanes</option>
                                        <option value="6">6 Lanes</option>
                                        <option value="7">7 Lanes</option>
                                        <option value="8">8 Lanes</option>
                                        <option value="9">9 Lanes</option>
                                        <option value="10" selected>10 Lanes</option>
                                        <option value="11">11 Lanes</option>
                                        <option value="12">12 Lanes</option>
                                        <option value="13">13 Lanes</option>
                                        <option value="14">14 Lanes</option>
                                        <option value="15">15 Lanes</option>
                                        <option value="16">16 Lanes</option>
                                        <option value="17">17 Lanes</option>
                                        <option value="18">18 Lanes</option>
                                        <option value="19">19 Lanes</option>
                                        <option value="20">20 Lanes</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="excludedLanes">Excluded Lanes (comma-separated)</label>
                                    <input type="text" id="excludedLanes" placeholder="e.g. 5,7,9">
                                    <small class="field-help">Enter lane numbers to exclude from assignment</small>
                                </div>
                            </div>
                            <div class="config-buttons">
                                <button class="btn btn-success" onclick="saveLaneConfiguration()">Save Lane
                                    Settings</button>
                                <button class="btn" onclick="showLaneUsage()">Show Current Lane Usage</button>
                            </div>
                        </div>
                    </div>

                    <!-- User Interface Section -->
                    <div class="config-section">
                        <h3>User Interface</h3>
                        <div class="config-content">
                            <div class="checkbox-group">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="confirmWinnerSelection" checked>
                                        <span>
                                            Show confirmation dialog when selecting match winner
                                            <small class="field-help">When disabled, matches complete instantly without
                                                entering scores or statistics</small>
                                        </span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="autoOpenMatchControls" checked>
                                        <span>Automatically open Match Controls when entering Tournament page</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="developerMode">
                                    <span>
                                        Enable Developer Analytics
                                        <small class="field-help">Show advanced diagnostics and developer tools (click
                                            version number in Tournament page)</small>
                                    </span>
                                </label>
                            </div>

                            <h4 style="margin-top: 20px; margin-bottom: 10px; font-size: 16px;">Server Settings</h4>
                            <div class="checkbox-group">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="allowSharedTournamentDelete">
                                        <span>
                                            Allow deleting shared tournaments
                                            <small class="field-help">When disabled, delete buttons are hidden for
                                                shared tournaments on the server</small>
                                        </span>
                                    </label>
                                </div>

                            </div>

                            <button class="btn btn-success" onclick="saveUIConfiguration()">Save UI Settings</button>
                        </div>
                    </div>
                </div>


                <!-- Right Column -->
                <div class="config-column">

                    <!-- Point Values Section -->
                    <div class="config-section">
                        <h3>Point Values (autosave)</h3>
                        <div class="config-content">
                            <div class="config-grid">
                                <div class="form-group">
                                    <label for="participationPoints">Participation Points</label>
                                    <input type="number" id="participationPoints" value="5" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="firstPlacePoints">1st Place Points</label>
                                    <input type="number" id="firstPlacePoints" value="15" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="secondPlacePoints">2nd Place Points</label>
                                    <input type="number" id="secondPlacePoints" value="13" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="thirdPlacePoints">3rd Place Points</label>
                                    <input type="number" id="thirdPlacePoints" value="10" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="fourthPlacePoints">4th Place Points</label>
                                    <input type="number" id="fourthPlacePoints" value="9" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="fifthSixthPlacePoints">5th-6th Place Points</label>
                                    <input type="number" id="fifthSixthPlacePoints" value="8" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="seventhEighthPlacePoints">7th-8th Place Points</label>
                                    <input type="number" id="seventhEighthPlacePoints" value="7" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="highOutPoints">High Out Points (101+)</label>
                                    <input type="number" id="highOutPoints" value="1" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="tonPoints">Ton Points (100+)</label>
                                    <input type="number" id="tonPoints" value="0" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="shortLegPoints">Short Leg Points</label>
                                    <input type="number" id="shortLegPoints" value="1" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="oneEightyPoints">180 Points</label>
                                    <input type="number" id="oneEightyPoints" value="1" min="0">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Match Configuration Section -->
                    <div class="config-section">
                        <h3>Match Configuration (autosave)</h3>
                        <div class="config-content">
                            <div class="config-grid">
                                <div class="form-group">
                                    <label for="regularRoundsLegs">Regular Rounds</label>
                                    <select id="regularRoundsLegs">
                                        <option value="3" selected>Best of 3</option>
                                        <option value="5">Best of 5</option>
                                        <option value="7">Best of 7</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="backsideSemifinalLegs">Backside Semifinal</label>
                                    <select id="backsideSemifinalLegs">
                                        <option value="3" selected>Best of 3</option>
                                        <option value="5">Best of 5</option>
                                        <option value="7">Best of 7</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="frontsideSemifinalLegs">Frontside Semifinal</label>
                                    <select id="frontsideSemifinalLegs">
                                        <option value="3">Best of 3</option>
                                        <option value="5" selected>Best of 5</option>
                                        <option value="7">Best of 7</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="backsideFinalLegs">Backside Final</label>
                                    <select id="backsideFinalLegs">
                                        <option value="3">Best of 3</option>
                                        <option value="5" selected>Best of 5</option>
                                        <option value="7">Best of 7</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="grandFinalLegs">Grand Final</label>
                                    <select id="grandFinalLegs">
                                        <option value="3">Best of 3</option>
                                        <option value="5" selected>Best of 5</option>
                                        <option value="7">Best of 7</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Modal -->
        <div id="statsModal" class="modal">
            <div class="modal-content">
                <h3 id="statsPlayerName">Player Statistics</h3>

                <!-- Scrollable content area -->
                <div class="stats-content-container" style="max-height: 60vh; overflow-y: auto; padding-right: 8px;">
                    <div class="form-group">
                        <label>Short Legs (max 21 darts)</label>
                        <input type="number" id="statsShortLegDarts" min="9" max="21" placeholder="Enter dart count">
                        <button class="btn" onclick="addShortLeg()" style="margin-top: 5px;">Add Short Leg</button>
                    </div>

                    <div class="form-group">
                        <label>High Out Score (101+)</label>
                        <input type="number" id="statsHighOut" min="101" max="170" placeholder="Enter high out score">
                        <button class="btn" onclick="addHighOut()" style="margin-top: 5px;">Add High Out</button>
                    </div>

                    <div class="form-group">
                        <label>180s</label>
                        <div style="display: flex; align-items: center;">
                            <button class="btn" onclick="decrement180s()" onmouseover="this.style.background='#fef2f2'"
                                onmouseout="this.style.background='#ffffff'"
                                style="width: 24px; height: 24px; padding: 0; margin-right: 2px; display: flex; align-items: center; justify-content: center; color: #dc2626; border-color: #dc2626;">−</button>
                            <button class="btn" onclick="increment180s()" onmouseover="this.style.background='#dcfce7'"
                                onmouseout="this.style.background='#ffffff'"
                                style="width: 24px; height: 24px; padding: 0; margin-left: 1px; display: flex; align-items: center; justify-content: center; color: #166534; border-color: #166534;">+</button>
                            <span id="current180sCount"
                                style="margin-left: 8px; font-weight: bold; font-size: 1.0em; transform: translateY(-6px);">Current:
                                0</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Tons (100+)</label>
                        <div style="display: flex; align-items: center;">
                            <button class="btn" onclick="decrementTons()" onmouseover="this.style.background='#fef2f2'"
                                onmouseout="this.style.background='#ffffff'"
                                style="width: 24px; height: 24px; padding: 0; margin-right: 2px; display: flex; align-items: center; justify-content: center; color: #dc2626; border-color: #dc2626;">−</button>
                            <button class="btn" onclick="incrementTons()" onmouseover="this.style.background='#dcfce7'"
                                onmouseout="this.style.background='#ffffff'"
                                style="width: 24px; height: 24px; padding: 0; margin-left: 1px; display: flex; align-items: center; justify-content: center; color: #166534; border-color: #166534;">+</button>
                            <span id="currentTonsCount"
                                style="margin-left: 8px; font-weight: bold; font-size: 1.0em; transform: translateY(-6px);">Current:
                                0</span>
                        </div>
                    </div>

                    <!-- Lists grouped together -->
                    <div id="shortLegsList"></div>
                    <div id="highOutsList"></div>
                </div>

                <!-- Fixed button area at bottom -->
                <div class="text-center mt-20" style="flex-shrink: 0; margin-top: 20px;">
                    <button class="btn btn-success" onclick="saveStats()">Save Statistics</button>
                    <button class="btn" onclick="closeStatsModal()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Developer Analytics Modal -->
        <div id="analyticsModal" class="modal">
            <div class="modal-content analytics-modal-content"
                style="width: 90%; height: 90%; max-width: 90%; display: flex; flex-direction: column;">

                <!-- Title bar -->
                <h3>Developer Console</h3>

                <!-- Split view container -->
                <div class="analytics-split-view" style="display: flex; flex: 1; overflow: hidden; margin-top: 20px;">

                    <!-- Left pane: Statistics + Commands -->
                    <div class="analytics-left-pane"
                        style="width: 30%; overflow-y: auto; padding: 24px; border-right: 1px solid #ddd;">

                        <!-- Statistics Section -->
                        <h4
                            style="margin-top: 0; margin-bottom: 15px; font-size: 14px; color: #666; text-transform: uppercase; letter-spacing: 0.5px;">
                            Statistics</h4>

                        <div style="margin-bottom: 20px;">
                            <a href="#" onclick="showTransactionBreakdown(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 12px;">
                                <strong>Transaction Health</strong><br>
                                <span id="stat-transactions" style="font-size: 13px; color: #666;">Loading...</span>
                            </a>

                            <a href="#" onclick="showMatchStateDetails(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 12px;">
                                <strong>Match State</strong><br>
                                <span id="stat-matches" style="font-size: 13px; color: #666;">Loading...</span>
                            </a>

                            <a href="#" onclick="showQuickOverview(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 12px;">
                                <strong>Player Count</strong><br>
                                <span id="stat-players" style="font-size: 13px; color: #666;">Loading...</span>
                            </a>

                            <a href="#" onclick="showQuickOverview(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 12px;">
                                <strong>Lane Usage</strong><br>
                                <span id="stat-lanes" style="font-size: 13px; color: #666;">Loading...</span>
                            </a>
                        </div>

                        <!-- Commands Section -->
                        <h4
                            style="margin-top: 20px; margin-bottom: 15px; font-size: 14px; color: #666; text-transform: uppercase; letter-spacing: 0.5px;">
                            Commands</h4>

                        <div style="margin-bottom: 20px;">
                            <a href="#" onclick="commandReRenderBracket(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 8px; font-size: 14px;">Re-render
                                Bracket</a>

                            <a href="#" onclick="commandRecalculateRankings(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 8px; font-size: 14px;">Recalculate
                                Rankings</a>

                            <a href="#" onclick="commandRefreshDropdowns(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 8px; font-size: 14px;">Refresh
                                All Dropdowns</a>

                            <a href="#" onclick="commandValidateEverything(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 8px; font-size: 14px;">Validate
                                Everything</a>

                            <a href="#" onclick="showTransactionHistory(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 8px; font-size: 14px;">View
                                Transaction History</a>

                            <a href="#" onclick="showConsoleOutput(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 8px; font-size: 14px;">View
                                Console Output</a>

                            <a href="#" onclick="showMatchProgression(); return false;"
                                style="text-decoration: none; color: #065f46; display: block; margin-bottom: 8px; font-size: 14px;">View
                                Match Progression</a>
                        </div>

                        <!-- Timestamp -->
                        <div id="analytics-timestamp" style="font-size: 11px; color: #999; margin-top: 30px;">
                            Last updated: --:--:--
                        </div>

                    </div>

                    <!-- Right pane: Detail view -->
                    <div class="analytics-right-pane" style="flex: 1; overflow-y: auto; padding: 24px;">
                        <h4>Loading...</h4>
                        <p>Initializing Developer Console...</p>
                    </div>

                </div>

                <!-- Close button -->
                <div class="text-center mt-20" style="flex-shrink: 0; margin-top: 20px;">
                    <button class="btn" onclick="closeAnalyticsModal()">Close</button>
                </div>

            </div>
        </div>

        <!-- Load JavaScript files in the correct order -->
        <script src="main.js"></script>
        <script src="lane-management.js"></script>
        <script src="tournament-management.js"></script>
        <script src="player-management.js"></script>
        <script src="clean-match-progression.js"></script>
        <script src="bracket-lines.js"></script>
        <script src="bracket-rendering.js"></script>
        <script src="results-config.js"></script>
        <script src="dynamic-help-system.js"></script>
        <script src="analytics.js"></script>

        <footer>
            <span id="footerContent"></span></br> Created by Håvard Skrödahl, NewTon DC Malmö
        </footer>

        <!-- Updated Winner Confirmation Modal with validation -->
        <div id="winnerConfirmModal" class="modal">
            <div class="modal-content">
                <h3 id="winnerConfirmTitle">Confirm Match Winner</h3>
                <div id="winnerConfirmMessage" style="margin: 20px 0; line-height: 1.5;">
                    <!-- Message will be populated by JavaScript -->
                </div>

                <!-- Enhanced leg scores section with validation -->
                <div id="legScoresSection"
                    style="margin: 20px 0; padding: 15px; background: #f8f9fa; border: 1px solid #e5e7eb;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span style="font-weight: 600; color: #111827;">Final Score (optional):</span>
                        <small style="color: #6b7280; font-style: italic;">Winner must have more legs than loser</small>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center;">
                            <span id="winnerNameForLegs"
                                style="font-weight: 600; color: #065f46; margin-right: 10px; min-width: 80px;">Winner</span>
                            <input type="number" id="winnerLegs" min="0" max="7"
                                style="width: 60px; padding: 6px 8px; border: 1px solid #d1d5db; text-align: center;">
                            <span style="margin: 0 8px; color: #6b7280;">legs</span>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <span id="loserNameForLegs"
                                style="font-weight: 600; color: #6b7280; margin-right: 10px; min-width: 80px;">Loser</span>
                            <input type="number" id="loserLegs" min="0" max="7" value="0"
                                style="width: 60px; padding: 6px 8px; border: 1px solid #d1d5db; text-align: center;">
                            <span style="margin: 0 8px; color: #6b7280;">legs</span>
                        </div>
                    </div>
                    <!-- Validation message will be inserted here by JavaScript -->
                </div>

                <div class="text-center mt-20">
                    <button class="btn" id="winnerConfirmCancel" style="margin-right: 15px;">Cancel</button>
                    <button class="btn btn-success" id="winnerConfirmOK">Confirm Winner</button>
                </div>
            </div>
        </div>

        <!-- Match Controls Modal -->
        <div id="matchDetailsModal" class="modal">
            <div class="modal-content">
                <h3 id="matchDetailsTitle">Match Controls</h3>
                <div id="matchDetailsMessage"
                    style="margin: 20px 0; line-height: 1.5; font-family: monospace; white-space: pre-line;">
                    <!-- Match details will be populated by JavaScript -->
                </div>
                <div class="text-center mt-20">
                    <button class="btn" id="matchDetailsOK" style="background: #065f46;">OK</button>
                </div>
            </div>
        </div>

        <!-- Match Controls Modal -->
        <div id="matchCommandCenterModal" class="modal">
            <div class="modal-content match-controls-modal" style="max-width: 1100px;">
                <h3 id="commandCenterTitle">Match Controls</h3>

                <div class="match-controls-main-container">
                    <div class="match-controls-container">
                        <!-- LIVE Matches Section -->
                        <div id="liveMatchesSection" class="cc-match-section">
                            <h4 class="cc-section-header">🔴 LIVE Matches</h4>
                            <div id="liveMatchesContainer" class="cc-matches-container">
                                <!-- LIVE match cards will be populated here -->
                            </div>
                        </div>

                        <!-- Round-based Matches Section (repurposing front section) -->
                        <div id="frontMatchesSection" class="cc-match-section">
                            <!-- Section header will be dynamically created for each round -->
                            <div id="frontMatchesContainer" class="cc-matches-container">
                                <!-- Round-based match cards will be populated here -->
                            </div>
                        </div>

                        <!-- Back Bracket Matches Section (hidden - no longer used) -->
                        <div id="backMatchesSection" class="cc-match-section" style="display: none;">
                            <h4 class="cc-section-header">⚫ Backside - Ready to Start</h4>
                            <div id="backMatchesContainer" class="cc-matches-container">
                                <!-- Back bracket ready match cards will be populated here -->
                            </div>
                        </div>

                        <!-- Setup state message -->
                        <div id="setupMessage" class="cc-setup-message" style="display: none;">
                            <p>🔧 Tournament in setup mode</p>
                            <p style="font-size: 14px; color: #666; margin-top: 8px;">Add players and configure the
                                tournament to generate matches.</p>
                        </div>

                        <!-- Empty state message -->
                        <div id="noMatchesMessage" class="cc-no-matches-message" style="display: none;">
                            <p>No matches currently active or ready to start.</p>
                        </div>

                        <!-- Tournament Completion Celebration -->
                        <div id="tournamentCelebration" class="tournament-celebration" style="display: none;">
                            <div class="celebration-header">
                                <div class="celebration-title">🏆 Tournament Complete! 🏆</div>
                                <div class="celebration-subtitle" id="celebrationSubtitle">Congratulations to all
                                    players!</div>
                            </div>

                            <div class="podium-container">
                                <div class="podium-position second">
                                    <div class="podium-player" id="podium-second">
                                        <span class="podium-medal">🥈</span>
                                        <div class="podium-rank">2nd Place</div>
                                        <div class="podium-name">-</div>
                                    </div>
                                    <div class="podium-block second">2</div>
                                </div>

                                <div class="podium-position first">
                                    <div class="podium-player" id="podium-first">
                                        <span class="podium-medal">🥇</span>
                                        <div class="podium-rank">1st Place</div>
                                        <div class="podium-name">-</div>
                                    </div>
                                    <div class="podium-block first">1</div>
                                </div>

                                <div class="podium-position third">
                                    <div class="podium-player" id="podium-third">
                                        <span class="podium-medal">🥉</span>
                                        <div class="podium-rank">3rd Place</div>
                                        <div class="podium-name">-</div>
                                    </div>
                                    <div class="podium-block third">3</div>
                                </div>
                            </div>

                            <div class="celebration-highlights">
                                <div class="highlights-title">🎯 Tournament Highlights</div>
                                <div class="highlights-grid" id="highlightsGrid">
                                    <!-- Highlights will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Referee Suggestions Column -->
                    <div class="referee-suggestions-container">
                        <h4 class="cc-section-header">👥 Referee Suggestions</h4>
                        <div class="referee-suggestions-content">
                            <div id="refereeLosersSection" class="referee-section">
                                <h5 class="referee-subsection-header">Recent Losers</h5>
                                <div id="refereeLosersContainer" class="referee-list">
                                    <!-- Recent losers will be populated here -->
                                </div>
                            </div>
                            <div id="refereeWinnersSection" class="referee-section">
                                <h5 class="referee-subsection-header">Recent Winners</h5>
                                <div id="refereeWinnersContainer" class="referee-list">
                                    <!-- Recent winners will be populated here -->
                                </div>
                            </div>
                            <div id="refereeAssignmentsSection" class="referee-section">
                                <h5 class="referee-subsection-header">Recent Assignments</h5>
                                <div id="refereeAssignmentsContainer" class="referee-list">
                                    <!-- Recent referee assignments will be populated here -->
                                </div>
                            </div>
                            <div id="refereeSetupMessage" class="referee-setup-message" style="display: none;">
                                <p>🔧 Tournament in setup mode</p>
                                <p style="font-size: 14px; color: #666; margin-top: 8px;">Referee suggestions will
                                    appear when the tournament starts.</p>
                            </div>
                            <div id="noRefereeSuggestionsMessage" class="referee-empty-message" style="display: none;">
                                <p>No referee suggestions available</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-20">
                    <button class="btn" id="showStatisticsBtn" style="margin-right: 10px;">Statistics</button>
                    <button class="btn" id="commandCenterOK">Close</button>
                </div>
            </div>
        </div>

        <!-- Statistics Modal -->
        <div id="statisticsModal" class="modal">
            <div class="modal-content" style="width: 90%; max-width: 1200px;">
                <h3 style="text-align: center; margin-bottom: 20px;">📊 Tournament Statistics</h3>

                <div class="statistics-container" style="max-height: 70vh; overflow-y: auto;">
                    <table class="results-table" id="statisticsTable">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Points</th>
                                <th>Short Legs</th>
                                <th>High Outs</th>
                                <th>180s</th>
                                <th>Tons</th>
                                <th>Legs Won</th>
                                <th>Legs Lost</th>
                            </tr>
                        </thead>
                        <tbody id="statisticsTableBody">
                        </tbody>
                    </table>
                </div>

                <div class="text-center mt-20">
                    <button class="btn" onclick="popDialog()">Close</button>
                </div>
            </div>
        </div>

        <!-- Undo Confirmation Modal -->
        <div id="undoConfirmModal" class="modal">
            <div class="modal-content">
                <h3 id="undoConfirmTitle">Confirm Match Undo</h3>
                <div id="undoConfirmMessage" style="margin: 20px 0; line-height: 1.5;">
                    <!-- Undo confirmation message will be populated by JavaScript -->
                </div>
                <div class="text-center mt-20">
                    <button class="btn" id="undoConfirmCancel" style="margin-right: 15px;">Cancel</button>
                    <button class="btn btn-warning" id="undoConfirmOK">Confirm Undo</button>
                </div>
            </div>
        </div>

        <!-- Tournament In Progress Warning Modal -->
        <div id="tournamentProgressModal" class="modal">
            <div class="modal-content">
                <h3>🏆 Tournament Already in Progress</h3>
                <div style="margin: 20px 0; line-height: 1.6;">
                    <p><strong>This tournament is currently active with matches in progress.</strong></p>
                    <p>To generate a new bracket, you'll need to reset the tournament first.</p>

                    <div
                        style="background: #f8f9fa; padding: 15px; margin: 15px 0; border-left: 4px solid rgba(22, 101, 52, 1);">
                        <p style="margin: 0; font-weight: 600;">💡 How to Reset:</p>
                        <p style="margin: 8px 0 0 0;">Go to <strong>Setup page</strong> → <strong>"Reset
                                Tournament"</strong> button</p>
                    </div>

                    <div
                        style="background: #faf8f3; padding: 15px; margin: 15px 0; border-left: 4px solid rgba(180, 83, 9, 1);">
                        <p style="margin: 0; font-weight: 600;">⚠️ Important:</p>
                        <p style="margin: 8px 0 0 0;">Resetting will keep all players but clear match results and
                            bracket progress.</p>
                    </div>
                </div>
                <div class="text-center mt-20">
                    <button class="btn" onclick="popDialog()">Got It</button>
                </div>
            </div>
        </div>

        <!-- Reset Tournament Confirmation Modal -->
        <div id="resetTournamentModal" class="modal">
            <div class="modal-content">
                <h3>⚠️ Reset Tournament Confirmation</h3>
                <div style="margin: 20px 0; line-height: 1.6;">
                    <div
                        style="background: #faf8f3; padding: 15px; margin-bottom: 20px; border-left: 4px solid rgba(180, 83, 9, 1);">
                        <p style="margin: 0; font-weight: 600;">🚨 WARNING: This action cannot be undone!</p>
                    </div>

                    <div style="background: #f8f9fa; padding: 15px; margin: 15px 0;">
                        <h4 style="margin: 0 0 10px 0; color: #333;">Tournament Details:</h4>
                        <p style="margin: 5px 0;"><strong>Name:</strong> <span id="resetTournamentName">-</span></p>
                        <p style="margin: 5px 0;"><strong>Progress:</strong> <span id="resetMatchProgress">-</span></p>
                        <p style="margin: 5px 0;"><strong>Players:</strong> <span id="resetPlayerCount">-</span>
                            registered</p>
                    </div>

                    <div
                        style="background: #faf8f3; padding: 15px; margin: 15px 0; border-left: 4px solid rgba(180, 83, 9, 1);">
                        <h4 style="margin: 0 0 10px 0; color: #111827;">This will permanently delete:</h4>
                        <ul style="margin: 10px 0; padding-left: 20px; color: #111827;">
                            <li>All match results</li>
                            <li>All bracket progress</li>
                            <li>All tournament standings</li>
                        </ul>
                        <p style="margin: 8px 0 0 0; font-weight: 600; color: #111827;">Players will be kept but their
                            elimination status will be reset.</p>
                    </div>

                    <div
                        style="background: #f2f5f4; padding: 15px; margin: 15px 0; border-left: 4px solid rgba(22, 101, 52, 1);">
                        <p style="margin: 0; font-weight: 600; color: #111827;">🔒 Security Confirmation Required</p>
                        <p style="margin: 8px 0 12px 0; color: #111827;">Type the tournament name exactly to confirm
                            reset:</p>
                        <input type="text" id="resetConfirmationInput" placeholder="Tournament name..."
                            style="width: 100%; padding: 8px; border: 2px solid rgba(22, 101, 52, 1); font-size: 14px; border-radius: 0;"
                            autocomplete="off">
                    </div>
                </div>
                <div class="text-center mt-20">
                    <button class="btn" onclick="popDialog()" style="margin-right: 15px;">Cancel</button>
                    <button class="btn btn-warning" id="confirmResetBtn" onclick="confirmReset()" disabled>Reset
                        Tournament</button>
                </div>
            </div>
        </div>

        <!-- Delete Tournament Confirmation Modal -->
        <div id="deleteTournamentModal" class="modal">
            <div class="modal-content">
                <h3>🗑️ Delete Tournament Confirmation</h3>
                <div style="margin: 20px 0; line-height: 1.6;">
                    <div
                        style="background: #f8d7da; padding: 15px; margin-bottom: 20px; border-left: 4px solid #dc3545;">
                        <p style="margin: 0; font-weight: 600; color: #721c24;">⚠️ DANGER: This action cannot be undone!
                        </p>
                    </div>

                    <div style="background: #f8f9fa; padding: 15px; margin: 15px 0;">
                        <h4 style="margin: 0 0 10px 0; color: #333;">Tournament to Delete:</h4>
                        <p style="margin: 5px 0; font-size: 16px;"><strong>Name:</strong> <span
                                id="deleteTournamentName">-</span></p>
                        <p style="margin: 5px 0;"><strong>Date:</strong> <span id="deleteTournamentDate">-</span></p>
                        <p style="margin: 5px 0;"><strong>Players:</strong> <span id="deleteTournamentPlayers">-</span>
                        </p>
                        <p style="margin: 5px 0;"><strong>Status:</strong> <span id="deleteTournamentStatus">-</span>
                        </p>
                    </div>

                    <div
                        style="background: #faf8f3; padding: 15px; margin: 15px 0; border-left: 4px solid rgba(180, 83, 9, 1);">
                        <h4 style="margin: 0 0 10px 0; color: #856404;">This will permanently remove:</h4>
                        <ul style="margin: 10px 0; padding-left: 20px; color: #856404;">
                            <li>All tournament data</li>
                            <li>All player statistics</li>
                            <li>All match results and history</li>
                            <li>Tournament configuration</li>
                        </ul>
                        <p style="margin: 8px 0 0 0; font-weight: 600; color: #856404;">The tournament file will be
                            completely removed from your device.</p>
                    </div>
                </div>
                <div class="text-center mt-20">
                    <button class="btn" onclick="popDialog()" style="margin-right: 15px;">Cancel</button>
                    <button class="btn btn-danger" id="confirmDeleteBtn" onclick="confirmDeleteTournament()">Delete
                        Tournament</button>
                </div>
            </div>
        </div>

        <!-- Import Tournament Overwrite Modal -->
        <div id="importOverwriteModal" class="modal">
            <div class="modal-content">
                <h3>📂 Tournament Already Exists</h3>
                <div style="margin: 20px 0; line-height: 1.6;">
                    <div
                        style="background: #e7f3ff; padding: 15px; margin-bottom: 20px; border-left: 4px solid #0056b3;">
                        <p style="margin: 0; font-weight: 600; color: #0056b3;">A tournament with this name and date
                            already exists in your system.</p>
                    </div>

                    <div style="background: #f8f9fa; padding: 15px; margin: 15px 0;">
                        <h4 style="margin: 0 0 10px 0; color: #333;">Tournament Details:</h4>
                        <p style="margin: 5px 0; font-size: 16px;"><strong>Name:</strong> <span
                                id="importTournamentName">-</span></p>
                        <p style="margin: 5px 0;"><strong>Date:</strong> <span id="importTournamentDate">-</span></p>
                    </div>

                    <div
                        style="background: #faf8f3; padding: 15px; margin: 15px 0; border-left: 4px solid rgba(180, 83, 9, 1);">
                        <h4 style="margin: 0 0 10px 0; color: #856404;">If you choose to overwrite:</h4>
                        <ul style="margin: 10px 0; padding-left: 20px; color: #856404;">
                            <li>Current tournament data will be completely replaced</li>
                            <li>All existing match results will be lost</li>
                            <li>Player statistics will be overwritten</li>
                            <li>This action cannot be undone</li>
                        </ul>
                    </div>

                    <div style="background: #d1ecf1; padding: 15px; margin: 15px 0; border-left: 4px solid #17a2b8;">
                        <p style="margin: 0; font-weight: 600; color: #0c5460;">💡 Alternative:</p>
                        <p style="margin: 8px 0 0 0; color: #0c5460;">You can cancel and rename the imported tournament
                            file to avoid overwriting.</p>
                    </div>
                </div>
                <div class="text-center mt-20">
                    <button class="btn" onclick="popDialog()" style="margin-right: 15px;">Cancel Import</button>
                    <button class="btn btn-warning" id="confirmOverwriteBtn"
                        onclick="confirmOverwriteTournament()">Overwrite Existing</button>
                </div>
            </div>
        </div>

        <!-- Load Tournament Confirmation Modal -->
        <div id="loadTournamentModal" class="modal">
            <div class="modal-content" style="max-height: 85vh; overflow-y: auto;">
                <h3>🔄 Load Tournament Confirmation</h3>
                <div style="margin: 15px 0; line-height: 1.4;">
                    <div
                        style="background: #d1ecf1; padding: 12px; margin-bottom: 15px; border-left: 4px solid #17a2b8;">
                        <p style="margin: 0; font-weight: 600; color: #0c5460;">ℹ️ Data Safety Guaranteed</p>
                        <p style="margin: 6px 0 0 0; color: #0c5460;">Your current tournament data is automatically
                            saved and can be reloaded at any time. Loading a different tournament will not cause any
                            data loss.</p>
                    </div>

                    <div id="currentTournamentSection"
                        style="background: #f8f9fa; padding: 12px; margin: 12px 0; display: none;">
                        <h4 style="margin: 0 0 8px 0; color: #333;">Current Tournament:</h4>
                        <p style="margin: 3px 0; font-size: 16px;"><strong>Name:</strong> <span
                                id="currentTournamentName">-</span></p>
                        <p style="margin: 3px 0;"><strong>Date:</strong> <span id="currentTournamentDate">-</span></p>
                        <p style="margin: 3px 0;"><strong>Progress:</strong> <span id="currentMatchProgress">-</span>
                        </p>
                        <p style="margin: 3px 0;"><strong>Players:</strong> <span id="currentPlayerCount">-</span></p>
                    </div>

                    <div style="background: #e7f3ff; padding: 12px; margin: 12px 0; border-left: 4px solid #0056b3;">
                        <h4 style="margin: 0 0 8px 0; color: #0056b3;" id="loadActionTitle">You are about to load:</h4>
                        <p style="margin: 3px 0; font-size: 16px;"><strong>Name:</strong> <span
                                id="loadTournamentName">-</span></p>
                        <p style="margin: 3px 0;"><strong>Date:</strong> <span id="loadTournamentDate">-</span></p>
                        <p style="margin: 3px 0;"><strong>Progress:</strong> <span id="loadMatchProgress">-</span></p>
                        <p style="margin: 3px 0;"><strong>Players:</strong> <span id="loadPlayerCount">-</span></p>
                    </div>

                    <div style="background: #d4edda; padding: 12px; margin: 12px 0; border-left: 4px solid #28a745;">
                        <p style="margin: 0; font-weight: 600; color: #155724;">✓ What happens next:</p>
                        <ul style="margin: 8px 0; padding-left: 18px; color: #155724;">
                            <li>Current tournament data is automatically saved</li>
                            <li>Selected tournament becomes active</li>
                            <li>You'll be taken to the Registration page</li>
                            <li>All settings and configurations remain unchanged</li>
                        </ul>
                    </div>
                </div>
                <div class="text-center mt-20">
                    <button class="btn" onclick="popDialog()" style="margin-right: 15px;">Cancel</button>
                    <button class="btn btn-primary" id="confirmLoadBtn" onclick="confirmLoadTournament()">Load
                        Tournament</button>
                </div>
            </div>
        </div>

        <!-- Export Confirmation Modal -->
        <div id="exportConfirmModal" class="modal">
            <div class="modal-content" style="max-height: 85vh; overflow-y: auto;">
                <h3>📤 Export Tournament Results</h3>
                <div style="margin: 15px 0; line-height: 1.4;">
                    <div style="background: #f8f9fa; padding: 12px; border-radius: 5px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 8px 0; color: #333;">Tournament Details:</h4>
                        <p style="margin: 3px 0; font-size: 16px;"><strong>Name:</strong> <span
                                id="exportTournamentName">-</span></p>
                        <p style="margin: 3px 0;"><strong>Date:</strong> <span id="exportTournamentDate">-</span></p>
                        <p style="margin: 3px 0;"><strong>Status:</strong> <span id="exportTournamentStatus">-</span>
                        </p>
                        <p style="margin: 3px 0;"><strong>Players:</strong> <span id="exportPlayerCount">-</span></p>
                        <p style="margin: 3px 0;"><strong>Completed Matches:</strong> <span
                                id="exportMatchProgress">-</span></p>
                    </div>

                    <div
                        style="background: #f2f5f4; padding: 12px; border-radius: 5px; margin: 12px 0; border-left: 4px solid rgba(22, 101, 52, 1);">
                        <h4 style="margin: 0 0 8px 0; color: #111827;">Export Details:</h4>
                        <p style="margin: 3px 0;"><strong>Format:</strong> <span id="exportFormat">-</span></p>
                        <p style="margin: 3px 0;"><strong>Filename:</strong> <span id="exportFilename">-</span></p>
                        <p style="margin: 3px 0;"><strong>Content:</strong> <span id="exportContent">-</span></p>
                    </div>

                    <div id="exportWarningSection"
                        style="background: #faf8f3; padding: 12px; border-radius: 5px; margin: 12px 0; border-left: 4px solid rgba(180, 83, 9, 1); display: none;">
                        <p style="margin: 0; font-weight: 600; color: #856404;">⚠️ Tournament Incomplete</p>
                        <p style="margin: 6px 0 0 0; color: #856404;">This tournament is not yet finished. The export
                            will contain current standings but may not reflect final rankings.</p>
                    </div>

                    <div id="exportCompleteSection"
                        style="background: #f2f5f4; padding: 12px; border-radius: 5px; margin: 12px 0; border-left: 4px solid rgba(22, 101, 52, 1); display: none;">
                        <p style="margin: 0; font-weight: 600; color: #111827;">✓ Tournament Complete</p>
                        <p style="margin: 6px 0 0 0; color: #111827;">This tournament is finished with final rankings
                            available. The export will contain complete results.</p>
                    </div>

                    <div
                        style="background: #f2f5f4; padding: 12px; border-radius: 5px; margin: 12px 0; border-left: 4px solid rgba(22, 101, 52, 1);">
                        <p style="margin: 0; font-weight: 600; color: #111827;">📋 What will be included:</p>
                        <ul style="margin: 8px 0; padding-left: 18px; color: #111827;" id="exportIncludesList">
                            <!-- Populated by JavaScript -->
                        </ul>
                    </div>
                </div>
                <div class="text-center mt-20">
                    <button class="btn" onclick="popDialog()"
                        style="margin-right: 15px; background: #6c757d; font-weight: 600;">Cancel</button>
                    <button class="btn" id="confirmExportBtn" onclick="confirmExport()"
                        style="background: rgba(22, 101, 52, 0.9); color: white; font-weight: 600;">Export
                        Results</button>
                </div>
            </div>
        </div>

</body>

</html>